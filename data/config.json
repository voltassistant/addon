{
  "scheduler": {
    "enabled": true,
    "interval_minutes": 15,
    "retry_delay_seconds": 60,
    "max_retries": 3
  },
  "thresholds": {
    "min_soc": 15,
    "max_soc": 95,
    "emergency_soc": 15,
    "target_soc": 80,
    "price_percentile_low": 20,
    "price_percentile_high": 80,
    "min_solar_watts_for_charge": 500
  },
  "battery": {
    "capacity_wh": 10000,
    "max_charge_rate_w": 3000,
    "max_discharge_rate_w": 3000
  },
  "home_assistant": {
    "entities": {
      "sensors": {
        "battery_soc": "sensor.deye_battery_soc",
        "battery_power": "sensor.deye_battery_power",
        "solar_power": "sensor.deye_pv_power",
        "grid_power": "sensor.deye_grid_power",
        "load_power": "sensor.deye_load_power",
        "inverter_temp": "sensor.deye_inverter_temperature"
      },
      "controls": {
        "work_mode": "select.deye_work_mode",
        "grid_charge": "switch.deye_grid_charge",
        "battery_charge_limit": "number.deye_battery_charge_limit",
        "battery_discharge_limit": "number.deye_battery_discharge_limit"
      }
    },
    "work_modes": {
      "self_use": "self_use",
      "selling_first": "selling_first",
      "zero_export": "zero_export"
    }
  },
  "loads": {
    "enabled": true,
    "check_interval_seconds": 30,
    "max_inverter_power": 6000,
    "safety_margin_percent": 10,
    "devices": [
      {
        "id": "aire_salon",
        "name": "Aire acondicionado salón",
        "entity_id": "switch.aire_salon",
        "power_watts": 1500,
        "priority": "comfort",
        "can_shed": true,
        "min_off_minutes": 10
      },
      {
        "id": "calentador",
        "name": "Calentador de agua",
        "entity_id": "switch.calentador_agua",
        "power_watts": 2000,
        "priority": "comfort",
        "can_shed": true,
        "min_off_minutes": 30
      },
      {
        "id": "cargador_coche",
        "name": "Cargador coche eléctrico",
        "entity_id": "switch.cargador_coche",
        "power_watts": 3600,
        "priority": "accessory",
        "can_shed": true,
        "min_off_minutes": 5
      }
    ]
  }
}
