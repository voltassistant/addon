{
  "scheduler": {
    "enabled": true,
    "interval_minutes": 15,
    "retry_delay_seconds": 60,
    "max_retries": 3
  },
  "thresholds": {
    "min_soc": 15,
    "max_soc": 95,
    "emergency_soc": 15,
    "target_soc": 80,
    "price_percentile_low": 20,
    "price_percentile_high": 80,
    "min_solar_watts_for_charge": 500
  },
  "battery": {
    "capacity_kwh": 32.7,
    "max_charge_rate_w": 6000,
    "max_discharge_rate_w": 6000
  },
  "home_assistant": {
    "entities": {
      "sensors": {
        "battery_soc": "sensor.inverter_battery_soc",
        "battery_power": "sensor.inverter_battery_power",
        "battery_state": "sensor.inverter_battery_state",
        "solar_power": "sensor.inverter_pv_power",
        "grid_power": "sensor.inverter_grid_power",
        "load_power": "sensor.inverter_load_l1_power",
        "inverter_temp": "sensor.inverter_temperature"
      },
      "controls": {
        "work_mode": "select.inverter_work_mode",
        "energy_pattern": "select.inverter_energy_pattern",
        "time_of_use": "select.inverter_time_of_use",
        "export_power": "number.inverter_export_surplus_power",
        "program_1_soc": "number.inverter_program_1_soc",
        "program_1_charging": "select.inverter_program_1_charging"
      }
    },
    "work_modes": {
      "export_first": "Export First",
      "zero_export_load": "Zero Export To Load",
      "zero_export_ct": "Zero Export To CT"
    },
    "charging_modes": {
      "disabled": "Disabled",
      "grid": "Grid",
      "generator": "Generator"
    }
  },
  "control_strategy": {
    "description": "Usa program_1 como control din√°mico (00:00-23:59)",
    "default_work_mode": "zero_export_ct",
    "rules": {
      "cheap_price_charge": {
        "condition": "price < P20 AND soc < 80",
        "action": {
          "program_1_charging": "Grid",
          "program_1_soc": 80
        }
      },
      "solar_available": {
        "condition": "solar > 500W",
        "action": {
          "program_1_charging": "Disabled"
        }
      },
      "emergency_low_soc": {
        "condition": "soc < 15",
        "action": {
          "program_1_charging": "Grid",
          "program_1_soc": 30
        }
      },
      "expensive_price": {
        "condition": "price > P80",
        "action": {
          "program_1_charging": "Disabled",
          "program_1_soc": 15
        }
      }
    }
  },
  "loads": {
    "enabled": false,
    "check_interval_seconds": 30,
    "max_inverter_power": 6000,
    "safety_margin_percent": 10,
    "devices": []
  }
}
